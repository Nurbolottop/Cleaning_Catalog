#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª—É–≥ –∫–ª–∏–Ω–∏–Ω–≥–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
"""
import os
import sys
import django

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'core.settings')
django.setup()

from apps.cms.models import (
    CategoryOrganization, Service, ServiceZoneItem, ServiceChemicalItem,
    ServiceEquipmentItem, ServiceFAQItem, ServiceRequirementItem,
    ServiceWorkConditionItem, ServiceExcludedItem, ServicePriceItem
)

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
SERVICES_DATA = {
    "–ö–∞—Ñ–µ / –†–µ—Å—Ç–æ—Ä–∞–Ω—ã": [
        "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞",
        "–£–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞", 
        "–•–∏–º—á–∏—Å—Ç–∫–∞ –¥–∏–≤–∞–Ω–æ–≤",
        "–£–±–æ—Ä–∫–∞ –∫—É—Ö–Ω–∏",
        "–ú–æ–π–∫–∞ –æ–∫–æ–Ω",
        "–ú–æ–π–∫–∞ —Ñ–∞—Å–∞–¥–∞"
    ],
    "–ß–∞—Å—Ç–Ω—ã–µ –∫–ª–∏–Ω–∏–∫–∏": [
        "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞",
        "–£–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞",
        "–ú–æ–π–∫–∞ –æ–∫–æ–Ω", 
        "–ú–æ–π–∫–∞ —Ñ–∞—Å–∞–¥–∞"
    ],
    "–®–∫–æ–ª—ã / —Å–∞–¥–∏–∫–∏": [
        "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞",
        "–£–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞",
        "–•–∏–º—á–∏—Å—Ç–∫–∞ –¥–∏–≤–∞–Ω–æ–≤",
        "–ú–æ–π–∫–∞ –æ–∫–æ–Ω",
        "–ú–æ–π–∫–∞ —Ñ–∞—Å–∞–¥–∞"
    ],
    "–û—Ñ–∏—Å—ã –∏ –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä—ã": [
        "–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞",
        "–£–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞",
        "–†–µ–≥—É–ª—è—Ä–Ω–∞—è —É–±–æ—Ä–∫–∞",
        "–ú–æ–π–∫–∞ –æ–∫–æ–Ω",
        "–ú–æ–π–∫–∞ —Ñ–∞—Å–∞–¥–∞"
    ]
}

# –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —É—Å–ª—É–≥
ZONE_ITEMS = [
    ("room", "–£–¥–∞–ª–µ–Ω–∏–µ –ø—ã–ª–∏ —Å–æ –≤—Å–µ—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π"),
    ("room", "–í–ª–∞–∂–Ω–∞—è —É–±–æ—Ä–∫–∞ –ø–æ–ª–æ–≤"),
    ("room", "–ß–∏—Å—Ç–∫–∞ –ø–ª–∏–Ω—Ç—É—Å–æ–≤ –∏ —É–≥–ª–æ–≤"),
    ("kitchen", "–ú–æ–π–∫–∞ –∫—É—Ö–æ–Ω–Ω—ã—Ö –≥–∞—Ä–Ω–∏—Ç—É—Ä–æ–≤"),
    ("kitchen", "–ß–∏—Å—Ç–∫–∞ —Ä–∞–∫–æ–≤–∏–Ω –∏ —Å–º–µ—Å–∏—Ç–µ–ª–µ–π"),
    ("kitchen", "–£–¥–∞–ª–µ–Ω–∏–µ –∂–∏—Ä–∞ —Å —Ä–∞–±–æ—á–∏—Ö –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π"),
    ("bath_wc", "–î–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏—è –∏ –º–æ–π–∫–∞ —Å–∞–Ω—É–∑–ª–æ–≤"),
    ("bath_wc", "–ß–∏—Å—Ç–∫–∞ —É–Ω–∏—Ç–∞–∑–æ–≤ –∏ —Ä–∞–∫–æ–≤–∏–Ω"),
    ("bath_wc", "–ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"),
    ("hall", "–ß–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã"),
    ("hall", "–ú—ã—Ç—å–µ –¥–≤–µ—Ä–µ–π –∏ —Ä—É—á–µ–∫"),
    ("office", "–£–±–æ—Ä–∫–∞ —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç"),
    ("office", "–ß–∏—Å—Ç–∫–∞ –æ—Ñ–∏—Å–Ω–æ–π –º–µ–±–µ–ª–∏"),
    ("other", "–í—ã–Ω–æ—Å –º—É—Å–æ—Ä–∞")
]

CHEMICAL_ITEMS = [
    ("–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ—é—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞", "–î–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π"),
    ("–ê–Ω—Ç–∏–±–∞–∫—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞", "–î–ª—è –¥–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏–∏ —Å–∞–Ω—É–∑–ª–æ–≤"),
    ("–°—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è —Å—Ç–µ–∫–ª–∞", "–î–ª—è –æ–∫–æ–Ω –∏ –∑–µ—Ä–∫–∞–ª"),
    ("–°—Ä–µ–¥—Å—Ç–≤–∞ –ø—Ä–æ—Ç–∏–≤ –∂–∏—Ä–∞ –∏ –Ω–∞–ª—ë—Ç–∞", "–î–ª—è –∫—É—Ö–Ω–∏ –∏ —Ç–µ—Ö–Ω–∏–∫–∏")
]

EQUIPMENT_ITEMS = [
    ("–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –ø—ã–ª–µ—Å–æ—Å", "–ú–æ—â–Ω–æ–µ –≤—Å–∞—Å—ã–≤–∞–Ω–∏–µ –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –æ—á–∏—Å—Ç–∫–∏"),
    ("–ü–∞—Ä–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä", "–î–ª—è –¥–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–æ–π–∫–∏—Ö –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–π"),
    ("–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–ª–∏–Ω–∏–Ω–≥-–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å", "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —É–±–æ—Ä–∫–∞ –±–µ–∑ —Ä–∞–∑–≤–æ–¥–æ–≤")
]

FAQ_ITEMS = [
    ("–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç —É–±–æ—Ä–∫–∞?", "–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–ª–æ—â–∞–¥–∏, –æ—Ç 2 –¥–æ 8 —á–∞—Å–æ–≤"),
    ("–ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —É–±–æ—Ä–∫—É –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è?", "–î–∞, —Ä–∞–±–æ—Ç–∞–µ–º –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏"),
    ("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–∏ –≤—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞?", "–î–∞, –≤—Å–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã"),
    ("–ù—É–∂–Ω–æ –ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è?", "–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ –∏ –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—Ç")
]

REQUIREMENT_ITEMS = [
    ("–î–æ—Å—Ç—É–ø –∫ –ø–æ–º–µ—â–µ–Ω–∏—é", "–û–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∑–æ–Ω–∞–º —É–±–æ—Ä–∫–∏"),
    ("–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ –∏ –≤–æ–¥–∞", "–ù–∞–ª–∏—á–∏–µ —Ä–æ–∑–µ—Ç–æ–∫ –∏ –≤–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è"),
    ("–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –∑–æ–Ω", "–£–±—Ä–∞—Ç—å –ª–∏—á–Ω—ã–µ –≤–µ—â–∏ –∏ —Ü–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã"),
    ("–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –æ–±—ä—ë–º–∞ —Ä–∞–±–æ—Ç", "–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å")
]

WORK_CONDITION_ITEMS = [
    ("–†–∞–±–æ—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏", "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏"),
    ("–í—Ä–µ–º—è –∏ –æ–±—ä—ë–º —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ", "–§–∏–∫—Å–∞—Ü–∏—è –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π –≤ –¥–æ–≥–æ–≤–æ—Ä–µ")
]

EXCLUDED_ITEMS = [
    ("–í—ã—Å–æ—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã", "–¢—Ä–µ–±—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"),
    ("–í—ã–≤–æ–∑ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º—É—Å–æ—Ä–∞", "–¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏"),
    ("–ú–æ–π–∫–∞ —Ñ–∞—Å–∞–¥–æ–≤", "–¢–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —É—Å–ª—É–≥–µ")
]

PRICE_ITEMS = [
    ("–ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å", "–æ—Ç 5 000 —Å–æ–º"),
    ("–£–±–æ—Ä–∫–∞ –¥–æ 50 –º¬≤", "–æ—Ç 10 000 —Å–æ–º"),
    ("–£–±–æ—Ä–∫–∞ 50-100 –º¬≤", "–æ—Ç 15 000 —Å–æ–º"),
    ("–£–±–æ—Ä–∫–∞ 100+ –º¬≤", "–¥–æ–≥–æ–≤–æ—Ä–Ω–∞—è")
]

def create_service_with_related_data(category_name, service_title):
    """–°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ –∏ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–π –¥–∞–Ω–Ω—ã—Ö"""
    
    # –ü–æ–∏—Å–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    category, created = CategoryOrganization.objects.get_or_create(
        name=category_name,
        defaults={
            'is_active': True,
            'order': 0
        }
    )
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
    service, created = Service.objects.get_or_create(
        title=service_title,
        organization=category,
        defaults={
            'is_active': True,
            'order': 0
        }
    )
    
    # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —É—Å–ª—É–≥—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ slug
    if created or not service.slug:
        service.save()
        print(f"   üîó –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω slug –¥–ª—è —É—Å–ª—É–≥–∏: {service.slug}")
    
    if created:
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ —É—Å–ª—É–≥–∞: {service_title}")
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –ø–æ –∑–æ–Ω–∞–º
        for i, (zone, text) in enumerate(ZONE_ITEMS):
            ServiceZoneItem.objects.get_or_create(
                service=service,
                zone=zone,
                text=text,
                defaults={
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
        for i, (name, description) in enumerate(CHEMICAL_ITEMS):
            ServiceChemicalItem.objects.get_or_create(
                service=service,
                name=name,
                defaults={
                    'description': description,
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
        for i, (name, description) in enumerate(EQUIPMENT_ITEMS):
            ServiceEquipmentItem.objects.get_or_create(
                service=service,
                name=name,
                defaults={
                    'description': description,
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ FAQ
        for i, (question, answer) in enumerate(FAQ_ITEMS):
            ServiceFAQItem.objects.get_or_create(
                service=service,
                question=question,
                defaults={
                    'answer': answer,
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –æ–±—ä–µ–∫—Ç—É
        for i, (text, description) in enumerate(REQUIREMENT_ITEMS):
            ServiceRequirementItem.objects.get_or_create(
                service=service,
                text=text,
                defaults={
                    'description': description,
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç
        for i, text in enumerate(WORK_CONDITION_ITEMS):
            ServiceWorkConditionItem.objects.get_or_create(
                service=service,
                text=text,
                defaults={
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (—á—Ç–æ –Ω–µ –≤—Ö–æ–¥–∏—Ç)
        for i, text in enumerate(EXCLUDED_ITEMS):
            ServiceExcludedItem.objects.get_or_create(
                service=service,
                text=text,
                defaults={
                    'order': i,
                    'is_active': True
                }
            )
        
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–Ω
        for i, (title, price) in enumerate(PRICE_ITEMS):
            ServicePriceItem.objects.get_or_create(
                service=service,
                title=title,
                defaults={
                    'price': price,
                    'order': i,
                    'is_active': True
                }
            )
    else:
        print(f"üîÑ –£—Å–ª—É–≥–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {service_title}")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    print("üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª—É–≥...")
    
    total_created = 0
    
    for category_name, services in SERVICES_DATA.items():
        print(f"\nüìÇ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {category_name}")
        
        for service_title in services:
            create_service_with_related_data(category_name, service_title)
            total_created += 1
    
    print(f"\n‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ! –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ {total_created} —É—Å–ª—É–≥")

# –í—ã–ø–æ–ª–Ω—è–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
main()
